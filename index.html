<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="theme-color" content="#222"/>
  <title>Mind Relax</title>
  <link rel="manifest" href="manifest.json"/>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: url('https://images.unsplash.com/photo-1506744038136-46273834b3fb?fit=crop&w=1920&q=80') no-repeat center center fixed;
      background-size: cover;
      transition: background 0.5s, color 0.3s;
      color: #111;
      overflow: hidden;
    }

    .dark-mode {
      background: url('https://images.unsplash.com/photo-1506744038136-46273834b3fb?fit=crop&w=1920&q=80') no-repeat center center fixed;
      background-size: cover;
      color: #fff;
      background-blend-mode: darken;
    }

    .container {
      text-align: center;
      padding: 2rem;
      backdrop-filter: blur(6px);
      background-color: rgba(255, 255, 255, 0.2);
      border-radius: 16px;
      margin: 2rem;
    }

    h1 {
      font-size: 2.5rem;
      margin-bottom: 0.5rem;
    }

    .player, .controls {
      margin: 1.5rem 0;
    }

    select, button {
      padding: 0.5rem 1rem;
      font-size: 1rem;
      border: none;
      border-radius: 8px;
      margin: 0.5rem;
    }

    #volume {
      width: 150px;
    }

    .breath-circle {
      margin: 2rem auto;
      width: 150px;
      height: 150px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.3);
      animation: breathe 8s infinite ease-in-out;
    }

    @keyframes breathe {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.5); }
    }

    .prompt {
      font-size: 1.2rem;
      margin-top: 1rem;
    }

    .timer {
      font-size: 1.8rem;
      margin-top: 1rem;
    }

    .toggle-dark {
      position: fixed;
      top: 10px;
      right: 10px;
    }
  </style>
</head>
<body>
  <button class="toggle-dark" onclick="toggleDarkMode()">üåô</button>
  <div class="container">
    <h1>Mind Relax</h1>

    <div class="player">
      <label for="track">Choose Music:</label>
      <select id="track">
        <option value="ocean.mp3">Ocean üåä</option>
        <option value="forest.mp3">Forest üå≤</option>
        <option value="piano.mp3">Piano üéπ</option>
        <option value="rain.mp3">Rain üåßÔ∏è</option>
      </select>
      <br />
      <button onclick="playMusic()">‚ñ∂ Play</button>
      <button onclick="pauseMusic()">‚è∏ Pause</button>
      <br />
      Volume: <input type="range" id="volume" min="0" max="1" step="0.01" value="1"/>
    </div>

    <div class="breath-circle"></div>
    <div class="prompt" id="prompt">Inhale‚Ä¶</div>

    <div class="controls">
      <label for="session">Timer (mins):</label>
      <select id="session">
        <option value="1">1</option>
        <option value="5">5</option>
        <option value="10">10</option>
      </select>
      <button onclick="startTimer()">üïí Start Session</button>
      <div class="timer" id="timer">0:00</div>
    </div>
  </div>

  <audio id="bg-music" loop></audio>

  <script>
    const audio = document.getElementById('bg-music');
    const trackSelect = document.getElementById('track');
    const volumeSlider = document.getElementById('volume');
    const promptText = document.getElementById('prompt');
    const timerDisplay = document.getElementById('timer');

    let timerInterval;
    let totalSeconds = 0;

    function playMusic() {
      audio.src = trackSelect.value;
      audio.volume = volumeSlider.value;
      audio.play();
    }

    function pauseMusic() {
      audio.pause();
    }

    volumeSlider.addEventListener('input', () => {
      audio.volume = volumeSlider.value;
    });

    let inhale = true;
    setInterval(() => {
      promptText.innerText = inhale ? "Inhale‚Ä¶" : "Exhale‚Ä¶";
      inhale = !inhale;
    }, 4000);

    function startTimer() {
      clearInterval(timerInterval);
      const minutes = parseInt(document.getElementById('session').value);
      totalSeconds = minutes * 60;
      updateTimerDisplay();

      timerInterval = setInterval(() => {
        if (totalSeconds <= 0) {
          clearInterval(timerInterval);
          alert("Session complete üåü");
          timerDisplay.textContent = "0:00";
        } else {
          totalSeconds--;
          updateTimerDisplay();
        }
      }, 1000);
    }

    function updateTimerDisplay() {
      const mins = Math.floor(totalSeconds / 60);
      const secs = totalSeconds % 60;
      timerDisplay.textContent = `${mins}:${secs.toString().padStart(2, '0')}`;
    }

    function toggleDarkMode() {
      document.body.classList.toggle("dark-mode");
    }

    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('sw.js').then(() => {
        console.log('Service Worker Registered');
      });
    }
  </script>
</body>
</html>
